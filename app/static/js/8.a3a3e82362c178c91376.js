webpackJsonp([8],{"9KZq":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("ra3+"),s=i("44dg"),n=i("Uoa1"),c=i("s9Vi"),l=i("i84Q"),o=i("yclV"),r={data:function(){return{headTitle:"",showAlert:!1,showLoading:!0,actDetailItem:{},displayWindow:0,isActive:0,listData:{active_id:null,people_num:1,tkn:""},OutTimer:0,actionBtn:"立即预约"}},components:{headTop:a.a,loading:s.a,alertTip:n.a,iconSvg:c.a},mounted:function(){var t=this;this.listData.tkn=Object(o.a)("uid"),this.displayWindow=document.documentElement.clientHeight-this.$refs.wrapper.getBoundingClientRect().top,window.onresize=function(){t.displayWindow=document.documentElement.clientHeight-t.$refs.wrapper.getBoundingClientRect().top},this.listData.active_id=this.$route.query.id,this.listData.tkn=Object(o.a)("uid"),Object(l.s)(this.listData).then(function(e){t.hideLoading();"1"==e.result&&(t.actDetailItem=e.data,t.headTitle=e.data.active_title,e.data.active_person?t.actDetailItem.active_person=Number(e.data.active_person):t.actDetailItem.active_person=1)})},methods:{closeTip:function(){this.showAlert=!1},hideLoading:function(){this.showLoading=!1},payNum:function(t,e){this.listData.people_num=e+1,null!==this.isActive&&(this.listData.user_money=Number(t.target.innerText))},actButton:function(t){var e=this;t.is_order||t.is_full||Object(l.k)(this.listData).then(function(t){1==t.result?(Object(l.s)(e.listData).then(function(t){if(1==t.result)e.actDetailItem=t.data;else if(100==t.result){var i=e;e.OutTimer=setTimeout(function(){i.$router.push({path:"/login"}),clearTimeout(i.OutTimer)},500)}}),e.showAlert=!0,e.alertText=t.msg):(e.showAlert=!0,e.alertText=t.msg)})},iconAction:function(t){return t.is_order?(this.actionBtn="已预约",!1):!t.is_full||(this.actionBtn="已满",!1)}},watch:{displayWindow:function(t){this.displayWindow=t}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"actDetail"},[i("div",{ref:"wrapper",staticClass:"reseContent",style:{height:t.displayWindow+"px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.actDetailItem.active_thum,expression:"actDetailItem.active_thum"}],staticClass:"detImg"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.actDetailItem.active_thum,expression:"actDetailItem.active_thum"}],attrs:{alt:"头图"}})]),t._v(" "),i("div",{staticClass:"reseBox"},[i("div",{staticClass:"detTitle"},[t._v("\n          "+t._s(t.actDetailItem.active_title)+"\n        ")]),t._v(" "),i("div",{staticClass:"msgItem"},[i("div",{staticClass:"itemIcon"},[i("iconSvg",{attrs:{"icon-style":"iconfont","icon-class":"location"}})],1),t._v(" "),i("div",{staticClass:"msgInfo"},[t._v("\n            "+t._s(t.actDetailItem.active_address)+"\n          ")])]),t._v(" "),i("div",{staticClass:"msgItem"},[i("div",{staticClass:"itemIcon"},[i("iconSvg",{attrs:{"icon-style":"iconfont","icon-class":"shijian"}})],1),t._v(" "),i("div",{staticClass:"msgInfo"},[t._v("\n            "+t._s(t.actDetailItem.active_time)+"\n          ")])]),t._v(" "),i("div",{staticClass:"detSubtitle"},[t._v("\n          "+t._s(t.actDetailItem.active_msg)+"\n        ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.actDetailItem.is_order,expression:"actDetailItem.is_order"}],staticClass:"detSubtitle"},[t._v("\n          "+t._s(t.actDetailItem.order_num)+"\n        ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.actDetailItem.is_order,expression:"!actDetailItem.is_order"}],staticClass:"link linkLeft"},[i("i",{staticClass:"point top"}),t._v(" "),i("i",{staticClass:"point down"}),t._v(" "),i("i",{staticClass:"line"})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.actDetailItem.is_order,expression:"!actDetailItem.is_order"}],staticClass:"link linkRight"},[i("i",{staticClass:"point top"}),t._v(" "),i("i",{staticClass:"point down"}),t._v(" "),i("i",{staticClass:"line"})])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.actDetailItem.is_order,expression:"!actDetailItem.is_order"}],staticClass:"reseNumber"},[i("span",{staticClass:"humanText"},[t._v("预约人数")]),t._v(" "),i("ul",t._l(t.actDetailItem.active_person,function(e,a){return i("li",{key:e.number,staticClass:"humanItem itemBtn",class:[t.listData.people_num==a+1?"itemActive":""],on:{click:function(e){t.payNum(e,a)}}},[t._v("\n            "+t._s(a+1)+"\n          ")])}))])]),t._v(" "),i("div",{staticClass:"actDetailBtn",class:{actEnd:t.iconAction(t.actDetailItem)},on:{click:function(e){t.actButton(t.actDetailItem)}}},[i("span",[t._v(t._s(t.actionBtn))])])]),t._v(" "),i("transition",{attrs:{name:"loading"}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1),t._v(" "),t.showAlert?i("alert-tip",{attrs:{showHide:t.showAlert,alertText:t.alertText},on:{closeTip:t.closeTip}}):t._e()],1)},staticRenderFns:[]},v=i("VU/8")(r,d,!1,function(t){i("B4rE")},"data-v-d4ed5506",null);e.default=v.exports},B4rE:function(t,e){}});
//# sourceMappingURL=8.a3a3e82362c178c91376.js.map